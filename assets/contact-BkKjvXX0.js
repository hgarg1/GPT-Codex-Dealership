import{g as T}from"./main-CwYD5q4G.js";const g=window.matchMedia("(prefers-reduced-motion: reduce)").matches,k="America/New_York",q=[{value:"America/New_York",label:"New York (ET)"},{value:"America/Chicago",label:"Chicago (CT)"},{value:"America/Denver",label:"Denver (MT)"},{value:"America/Los_Angeles",label:"Los Angeles (PT)"},{value:"Europe/London",label:"London (GMT)"},{value:"Europe/Paris",label:"Paris (CET)"},{value:"Asia/Dubai",label:"Dubai (GST)"},{value:"Asia/Singapore",label:"Singapore (SGT)"}],A=document.querySelectorAll(".schedule-tab"),h=document.querySelector(".schedule-dates"),v=document.querySelector(".schedule-times"),w=document.querySelector(".schedule-summary"),S=document.querySelector('select[name="time_zone"]'),$=document.querySelector('input[name="preferred_date"]'),b=document.querySelector('input[name="preferred_time"]'),L=document.querySelector('input[name="preferred_utc"]'),I=Intl.DateTimeFormat().resolvedOptions().timeZone,V=q.some(e=>e.value===I)?I:k;let d=V,y="weekday",m="",p="",D="";const _=e=>{const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${t}-${a}-${s}`},N=(e,t)=>{const a=new Date(e);return a.setDate(a.getDate()+t),a},O=(e,t,a,s,r,o)=>{const c=new Date(Date.UTC(e,t-1,a,s,r)),u=new Date(c.toLocaleString("en-US",{timeZone:o})),i=c.getTime()-u.getTime();return new Date(c.getTime()+i)},C=(e,t)=>{const[a,s,r]=e.split("-").map(Number),o=O(a,s,r,12,0,k),c=new Intl.DateTimeFormat("en-US",{timeZone:t,weekday:"short"}).format(o),u=new Intl.DateTimeFormat("en-US",{timeZone:t,month:"short",day:"numeric"}).format(o),i=new Intl.DateTimeFormat("en-US",{timeZone:t,weekday:"short",month:"short",day:"numeric"}).format(o);return{dayLabel:c,monthDayLabel:u,fullLabel:i}},B=(e,t)=>new Intl.DateTimeFormat("en-US",{timeZone:t,hour:"numeric",minute:"2-digit"}).format(e),G={weekday:[{hour:9,minute:0},{hour:11,minute:30},{hour:14,minute:0},{hour:16,minute:30}],weekend:[{hour:10,minute:0},{hour:12,minute:30},{hour:15,minute:0}]},H=[2,7,12,18],P=new Set(H.map(e=>_(N(new Date,e)))),z=e=>{const t=[],a=new Date;for(let s=0;s<21;s+=1){const r=N(a,s),o=r.getDay(),c=o===0||o===6;(e==="weekend"&&c||e==="weekday"&&!c)&&t.push(_(r))}return t},Y=()=>q.find(e=>e.value===d)?.label||d,x=()=>{if(!w)return;if(!m||!p){w.textContent="Select a date and time to reserve an appointment.";return}const{fullLabel:e}=C(m,d);w.textContent=`Selected: ${e} - ${p} (${Y()})`},X=e=>{A.forEach(t=>{const a=t.dataset.mode===e;t.classList.toggle("active",a),t.setAttribute("aria-selected",a?"true":"false")})},M=e=>{h?.querySelectorAll(".schedule-date").forEach(t=>{t.classList.remove("active"),t.setAttribute("aria-selected","false")}),e.classList.add("active"),e.setAttribute("aria-selected","true"),m=e.dataset.value||"",$&&($.value=m),j(y),x(),g||T.fromTo(e,{scale:.98},{scale:1,duration:.3,ease:"power2.out"})},R=e=>{if(!h)return;h.innerHTML="";const t=z(e);let a=null;t.forEach(o=>{const{dayLabel:c,monthDayLabel:u}=C(o,d),i=P.has(o),n=document.createElement("button");n.type="button",n.className="schedule-date",n.dataset.value=o,n.setAttribute("role","option"),n.innerHTML=`<span>${c}</span><strong>${u}</strong>`,i?(n.classList.add("is-disabled"),n.disabled=!0):a||(a=n),i||n.addEventListener("click",()=>M(n)),h.appendChild(n)});const r=h.querySelector(`.schedule-date[data-value="${m}"]:not(.is-disabled)`)||a;r&&M(r)},W=e=>{v?.querySelectorAll(".schedule-time").forEach(t=>{t.classList.remove("active"),t.setAttribute("aria-selected","false")}),e.classList.add("active"),e.setAttribute("aria-selected","true"),p=e.textContent||"",D=e.dataset.utc||"",b&&(b.value=p),L&&(L.value=D),x(),g||T.fromTo(e,{scale:.96},{scale:1,duration:.25,ease:"power2.out"})},j=e=>{if(!v||!m)return;v.innerHTML="";const[t,a,s]=m.split("-").map(Number);(G[e]||[]).forEach((o,c)=>{const u=O(t,a,s,o.hour,o.minute,k),i=B(u,d),n=document.createElement("button");n.type="button",n.className="schedule-time",n.textContent=i,n.setAttribute("role","option"),n.dataset.utc=u.toISOString(),c===0&&(n.classList.add("active"),n.setAttribute("aria-selected","true"),p=i,D=n.dataset.utc,b&&(b.value=i),L&&(L.value=n.dataset.utc)),n.addEventListener("click",()=>W(n)),v.appendChild(n)})},E=e=>{y=e,X(e),R(e),x()},J=()=>{S&&(S.innerHTML="",q.forEach(e=>{const t=document.createElement("option");t.value=e.value,t.textContent=e.label,e.value===d&&(t.selected=!0),S.appendChild(t)}),S.addEventListener("change",e=>{d=e.target.value,E(y)}))};A.length&&h&&v&&(A.forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.mode;t&&t!==y&&E(t)})}),J(),E(y));const l=document.querySelector(".contact-form--lux"),f=l?.querySelector(".form-success"),F=l?.querySelector("[data-reset]"),U=l?.querySelector("[data-confirm-summary]");l&&f&&(f.hidden=!0,l.classList.remove("is-submitted"));l&&f&&l.addEventListener("submit",e=>{e.preventDefault();const t=new FormData(l),a={name:t.get("full_name")||"",email:t.get("email")||"",phone:t.get("phone")||"",vehicleInterest:t.get("vehicle_interest")||"",channel:t.get("channel")||"",message:t.get("message")||"",dateValue:m,timeLabel:p,utc:D,timeZone:d,timeZoneLabel:Y()};if(sessionStorage.setItem("apexAppointment",JSON.stringify(a)),U&&a.dateValue&&a.timeLabel){const{fullLabel:s}=C(a.dateValue,a.timeZone);U.textContent=`Selected: ${s} - ${a.timeLabel} (${a.timeZoneLabel})`}l.classList.add("is-submitted"),f.hidden=!1,g||T.fromTo(f,{autoAlpha:0,y:18},{autoAlpha:1,y:0,duration:.8,ease:"power3.out"})});F&&l&&f&&F.addEventListener("click",()=>{l.classList.remove("is-submitted"),f.hidden=!0});const Z=(e,t=6)=>{if(!e||g)return;const a=r=>{const o=e.getBoundingClientRect(),c=(r.clientX-o.left)/o.width-.5,i=(-((r.clientY-o.top)/o.height-.5)*t).toFixed(2),n=(c*t).toFixed(2);e.style.transform=`perspective(800px) rotateX(${i}deg) rotateY(${n}deg)`},s=()=>{e.style.transform=""};e.addEventListener("pointermove",a),e.addEventListener("pointerleave",s)};g||(document.querySelectorAll(".contact-hero-stage").forEach(e=>Z(e,6)),document.querySelectorAll(".journey-step").forEach(e=>Z(e,4)),T.to(".stage-glass",{y:-6,duration:3,ease:"sine.inOut",repeat:-1,yoyo:!0}));
